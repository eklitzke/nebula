#! /bin/sh

make distclean

TARGET="nebula"

CXX="g++"
CXXFLAGS="-Wall -Wextra -Werror -std=c++11 `sdl-config --cflags`"
LDFLAGS="`sdl-config --libs`"

for arg in $@; do
    if [ "$arg" == "--debug-all" ]; then
        CXXFLAGS+=" -ggdb -DDEBUG"
    elif [ "$arg" == "--debug-verbose" ]; then
        CXXFLAGS+=" -DDEBUG"
    elif [ "$arg" == "--debug" ]; then
        CXXFLAGS+=" -ggdb"
    elif [ "$arg" == "--optim" ]; then
        CXXFLAGS+=" -O3"
    fi
done

cat <<EOF > config.mk
# config.mk generated by configure.

TARGET = $TARGET

CXX = $CXX
CXXFLAGS = $CXXFLAGS

LDFLAGS = $LDFLAGS

# EOF
EOF
